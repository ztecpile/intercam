<!DOCTYPE html>
<div class="header"></div>
<div class="posicion"></div>
<!--Abre contenido-->
<main class="">
    <div class="bdcontent">
        <hr class="red" />
        <h2>Reuters Administracion Perfiles</h2>
        <hr class="red" />

        <div class="container">

            <div class="row">
                <div id="divcboTipo" class="col-sm-12">
                    <div class="caja">
                        <select  [(ngModel)]="grupoSelecionado" (change)="cambioDeGrupo()">
                            <option value="-1">Selecionar</option>
                            <option *ngFor="let grupo of grupoVO " [value]="grupo.gpoClave">{{grupo.gpoNombre}}</option>
                        </select>
                    </div>
                    <label appearance="fill" class="formulario__label">Grupo</label>
                </div>
            

                <div class="mat-elevation-z8 col-sm-7 mr-5 ml-5 mt-5">
                    <strong>
                        <h6>Seleccione una divisa</h6>
                    </strong>
                    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">

                        <ng-container matColumnDef="divisa">
                            <th mat-header-cell *matHeaderCellDef>Divisa</th>
                            <td mat-cell *matCellDef="let element">{{element.divId}} - {{ element.divNombre }}</td>
                        </ng-container>


                        <ng-container matColumnDef="activar">
                            <th mat-header-cell *matHeaderCellDef>
                                Activar
                            </th>
                            <td mat-cell *matCellDef="let row">

                                <mat-checkbox (change)="chackChange()" [(ngModel)]="row.selecionado" [disabled]="grupoSelecionado==-1"> </mat-checkbox>
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="solo_lectura">
                            <th mat-header-cell *matHeaderCellDef>
                                Solo Lectura
                            </th>
                            <td mat-cell *matCellDef="let row">
                                <mat-checkbox [(ngModel)]="row.soloLectura" [disabled]="grupoSelecionado==-1"> </mat-checkbox>
                            </td>
                        </ng-container>


                        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
                    </table>
                    <mat-paginator [pageSizeOptions]="[20]" showFirstLastButtons>
                    </mat-paginator>
                </div>
                <div class="col-sm-1"></div>

                <div class="mat-elevation-z8 col-sm-4 mr-5 ml-5 mt-5">
                    <strong>
                        <h6>Seleccione la seccion</h6>
                    </strong>
                    <table mat-table [dataSource]="sectionDataSource" class="mat-elevation-z8">

                        <ng-container matColumnDef="seccion">
                            <th mat-header-cell *matHeaderCellDef>Seccion</th>
                            <td mat-cell *matCellDef="let element">{{element.label}}</td>
                        </ng-container>


                        <ng-container matColumnDef="permitir">
                            <th mat-header-cell *matHeaderCellDef>
                                Permitir
                            </th>
                            <td mat-cell *matCellDef="let row">

                                <mat-checkbox [(ngModel)]="row.selected" [disabled]="grupoSelecionado==-1" > </mat-checkbox>
                            </td>
                        </ng-container>




                        <tr mat-header-row *matHeaderRowDef="displayedColumns2"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns2"></tr>
                    </table>
                    <br>
                    <br>
                    <strong>
                        <h6>Divisas : {{divisasCount}} </h6>
                    </strong>

                    <strong>
                        <h6>Secciones : {{seccionesCount}}</h6>
                    </strong>
                </div>
                <button [disabled]="grupoSelecionado == -1" class="btn-img save-button" type="submit" (click)="salvarPerfil()">
                    <span class="tooltip">Guardar</span>
                </button>


            </div>
        </div>


        <hr class="red" />
    </div>
</main>